<!--
================GNU General Public License================================

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.  If not, see <http://www.gnu.org/licenses/>.

================in addition===============================================

In addition, each military use, and the use for interest profit will be
excluded.
Environmental damage caused by the use must be kept as small as possible.

-->
<ui:composition template="/decorators/menuDecorator.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui" xmlns:h="http://java.sun.com/jsf/html">
    <ui:define name="contentWithMenu">
        <p:panel style="background: #ffffff" rendered="#{userSession.notLoggedIn}">
            <h:graphicImage name="/img/header.gif" alt="logo"/>
        </p:panel>

        <p:panel header="!!! Testseite !!!" style="background: red" rendered="#{userSession.notLoggedIn}">
            <p>Dies ist lediglich der Versuch einer neuen Tauschringseite.</p>

            <p>Inhalte haben keinerlei Relevanz</p>

            <p>echte Informationen erhällst du auf http://www.tauschring-hamburg.org/</p>
        </p:panel>

        <p:panel header="Tauschring Hamburg" rendered="#{userSession.notLoggedIn}">
            Hier wird eine übersichtsseite mit Terminen entstehen.
            Bei Login werden jew. die aktuellsten 3 Überweisungen, neuste Mitglieder, neusten Angebote ... zu sehen sein.
        </p:panel>

        <p:panel header="Kommende Termine" rendered="#{userSession.loggedIn}">

            <div style="text-align: center">
                <table class="borderlessTable">
                    <ui:repeat value="#{userSession.next3EventsInternal}" var="event">
                        <tr>
                            <td>
                                <a href="${pageContext.request.servletPath}/internal/members/user.xhtml?userId=#{event.user.id}"><img
                                        src="#{event.user.gravatarUrl29}" alt="#{event.user.displayName}"/></a>
                            </td>
                            <td><h:outputText value="#{event.dashboardDate}"/></td>
                            <td style="text-align: center"><h:outputText value="#{event.period}"/></td>
                            <td><h:outputText value="#{event.displayTitle}"/></td>
                        </tr>
                    </ui:repeat>
                </table>
                <a href="${pageContext.request.servletPath}/internal/events/browse.xhtml">Details und weitere Termine</a>
            </div>
        </p:panel>


        <p:panel header="Kommende Termine" rendered="#{userSession.notLoggedIn}">
            weitere Termine sind im eingeloggten Bereich sichtbar.
        </p:panel>



        <h:panelGroup layout="block" style="width: 100%; vertical-align: bottom; display: inline-block;" rendered="#{userSession.loggedIn}">
            <p:panel header="Neuste Gesuche" rendered="#{userSession.loggedIn}" style="float: left; width: 46%;">
                <table class="borderlessTable">
                    <ui:repeat value="#{userSession.newestRequests}" var="advertisement">
                        <tr>
                            <td>
                                <a href="${pageContext.request.servletPath}/internal/members/user.xhtml?userId=#{advertisement.owner.id}"><img
                                        src="#{advertisement.owner.gravatarUrl29}" alt="#{advertisement.owner.displayName}"/></a>
                            </td>
                            <td>
                                <a href="#{advertisement.browseUrl}">
                                    <h:outputText value="#{advertisement.title}"/>
                                </a>
                            </td>
                            <td>
                                <a href="#{advertisement.browseCategoryUrl}">
                                    <h:outputText value="#{advertisement.category.name}"/>
                                </a>
                            </td>
                        </tr>
                    </ui:repeat>
                </table>
            </p:panel>

            <div style="width: 20px; float: left"><h:outputText value="&#160;"/></div>
            <p:panel header="Neuste Angebote" rendered="#{userSession.loggedIn}" style="overflow: auto">
                <table class="borderlessTable">
                    <ui:repeat value="#{userSession.newestOffers}" var="advertisement">
                        <tr>
                            <td>
                                <a href="${pageContext.request.servletPath}/internal/members/user.xhtml?userId=#{advertisement.owner.id}"><img
                                        src="#{advertisement.owner.gravatarUrl29}" alt="#{advertisement.owner.displayName}"/></a>
                            </td>
                            <td>
                                <a href="#{advertisement.browseUrl}">
                                <h:outputText value="#{advertisement.title}"/>
                                </a>
                            </td>
                            <td>
                                <a href="#{advertisement.browseCategoryUrl}">
                                <h:outputText value="#{advertisement.category.name}"/>
                                </a>
                            </td>
                        </tr>
                    </ui:repeat>
                </table>
            </p:panel>
        </h:panelGroup>

        <p:panel header="Neuste Mitglieder" rendered="#{userSession.loggedIn}">
            <ui:repeat value="#{userSession.newestMembers8}" var="member">
                <a href="${pageContext.request.servletPath}/internal/members/user.xhtml?userId=#{member.id}"><img
                        src="#{member.gravatarUrl80}" alt="#{member.displayName}"/></a>
            </ui:repeat>
        </p:panel>
        <p:panel header="Neuste Mitglieder" rendered="#{userSession.notLoggedIn}">
        <ui:repeat value="#{userSession.getNewestMembers(8)}" var="member">
            <img src="#{member.gravatarUrl80}"/>
        </ui:repeat>
    </p:panel>




    </ui:define>
</ui:composition>
