<?xml version="1.0"?>
<!--
================GNU General Public License================================

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.  If not, see <http://www.gnu.org/licenses/>.

================in addition===============================================

In addition, each military use, and the use for interest profit will be
excluded.
Environmental damage caused by the use must be kept as small as possible.

-->

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
        "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:r="http://www.tauschring-hamburg.org/public/ring">
<h:head>
    <title>Tauschring Hamburg</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta name="description" content="Tauschring Hamburg"/>
    <meta http-equiv="pragma" content="no-cache"/>
    <meta http-equiv="expires" content="0"/>
    <h:outputStylesheet name="style/style.css"/>
    <script type="text/javascript">
        if (window.location.protocol != "https:") {
            if (window.location.href.indexOf("http://localhost") == -1) {
                alert("unsecured! use https");
            }
        }
    </script>
</h:head>
<h:body>
    <div class="header ui-widget-content">
        <div class="container">
            <div style="width: 137px;float: left;">
                <a href="${pageContext.request.servletPath}/dashboard.xhtml">
                <h:graphicImage name="/img/logoGreen.png" alt="logo" styleClass="headerLogo" rendered="#{userSession.loggedIn}"/>
                </a>
            </div>
            <div style="width: 400px;float: left;padding-top: 4px;">
                <a href="${pageContext.request.servletPath}/dashboard.xhtml">
                <span id="headLine">Tauschring
                <span class="green">Hamburg</span></span>
                </a>
            </div>
            <p:growl id="messages"/>


            <div class="userStuff">
                <h:form styleClass="loginForm" rendered="#{userSession.notLoggedIn}">
                    ID
                    <p:inputText id="name" value="#{userSession.id}" size="5"/>
                    Passwort
                    <p:inputText type="password" value="#{userSession.password}" size="6"/>
                    <p:splitButton value="login" actionListener="#{userSession.login}"
                                   ajax="false">
                        <p:menuitem value="passwort vergessen" URL="/impressum.xhtml"/>
                    </p:splitButton>
                </h:form>


                <h:form rendered="#{userSession.loggedIn}" styleClass="loggedInHeader"
                        style="background-image: url('#{userSession.user.gravatarHeaderUrl51}')">
                    <p:splitButton value="Kontostand: #{userSession.user.balance}" url="/internal/account.xhtml"
                                   onclick="location='/internal/account.xhtml'">
                        <p:menuitem value="Mein Konto" url="/internal/account.xhtml" icon="ui-icon-transferthick-e-w"/>
                        <p:menuitem value="Einstellungen" url="/internal/members/user.xhtml?me=me"
                                    icon="ui-icon-wrench"/>
                        <p:menuitem value="Meine Anzeigen" url="/internal/advertisements/myAdvertisements.xhtml"
                                    icon="ui-icon-star"/>
                        <p:menuitem value="Ãœberweisung"
                                    url="/internal/transaction.xhtml?clear=clear" icon="ui-icon-arrowthick-1-e"/>
                        <p:separator/>
                        <p:menuitem value="logout" url="/logout/logout.xhtml" icon="ui-icon-power"/>
                    </p:splitButton>
                </h:form>
            </div>
        </div>
    </div>
    <h:panelGroup layout="block" styleClass="subheader" rendered="#{userSession.notLoggedIn}">
        <div class="container" style="">
            <div style="width: 180px;float: left;">
                <a href="${pageContext.request.servletPath}/dashboard.xhtml">
                    <h:graphicImage name="/img/logoGreen.png" alt="logo" styleClass="headerLogo2"/>
                </a>
            </div>
            <div class="rightSubHead">
                <h:graphicImage name="/img/header.gif" alt="logo"/>
            </div>
        </div>
    </h:panelGroup>

    <div class="container, frame">
        <ui:insert name="content"/>
    </div>
</h:body>
</html>