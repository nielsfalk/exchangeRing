<!--
================GNU General Public License================================

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.  If not, see <http://www.gnu.org/licenses/>.

================in addition===============================================

In addition, each military use, and the use for interest profit will be
excluded.
Environmental damage caused by the use must be kept as small as possible.

-->
<ui:composition template="/decorators/menuDecorator.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://java.sun.com/jsf/core">
<ui:define name="contentWithMenu">
<f:metadata>
    <f:viewParam name="userId" value="#{userModel.selectedUserId}"/>
    <f:viewParam name="me" value="#{userModel.selectedMe}"/>
</f:metadata>
<p:panel header="#{userModel.selectedUser.displayName}">
    <h:form>
        <h:panelGrid columns="2" columnClasses="column" cellpadding="5">
            <h:outputText value="Avatar:"/>
            <h:panelGroup>
                <img src="#{userModel.selectedUser.gravatarUrl250}" alt="avatar"/>
                <ui:fragment rendered="#{userModel.me}">
                    <p>Der Avatar lässt sich auf <a href="http://de.gravatar.com/">gravatar.com</a> ändern.</p>

                    <p>Möchtest du kein Foto benutzen? <a href="http://www.faceyourmanga.com/">faceyourmanga</a></p>
                </ui:fragment>
            </h:panelGroup>

            <h:outputText value="ID:"/>
            <h:outputText value="#{userModel.selectedUser.id}"/>

            <h:outputText value="Nickname:" rendered="#{userModel.meOrFilled(userModel.selectedUser.nickName)}"/>
            <h:outputText value="#{userModel.selectedUser.nickName}"
                          rendered="#{userModel.otherAndFilled(userModel.selectedUser.nickName)}"/>
            <p:inputText value="#{userModel.selectedUser.nickName}" rendered="#{userModel.me}"/>

            <h:outputText value="#{userModel.me?'Vorname, sichtbar':'Vorname'}:"
                          rendered="#{userModel.meOrFilled(userModel.selectedUser.visibleFirstName)}"/>
            <h:panelGroup rendered="#{userModel.meOrFilled(userModel.selectedUser.visibleFirstName)}">
                <h:outputText value="#{userModel.selectedUser.visibleFirstName}"/>
                <p:selectBooleanCheckbox value="#{userModel.selectedUser.firstNameVisible}" rendered="#{userModel.me}"/>
            </h:panelGroup>

            <h:outputText value="#{userModel.me?'Nachname, sichtbar':'Nachname'}:"
                          rendered="#{userModel.meOrFilled(userModel.selectedUser.visibleLastName)}"/>
            <h:panelGroup rendered="#{userModel.meOrFilled(userModel.selectedUser.visibleLastName)}">
                <h:outputText value="#{userModel.selectedUser.visibleLastName}"/>
                <p:selectBooleanCheckbox value="#{userModel.selectedUser.lastNameVisible}" rendered="#{userModel.me}"/>
            </h:panelGroup>

            <h:outputText value="Überweisung:" rendered="#{userModel.other}"/>
            <h:panelGroup rendered="#{userModel.other}">
                <a href="${pageContext.request.servletPath}/internal/transaction.xhtml?receiverId=#{userModel.selectedUser.id}">
                    überweisung an #{userModel.selectedUser.id}
                </a>
            </h:panelGroup>

            <h:outputText value="#{userModel.me?'Email, sichtbar':'Email'}:"
                          rendered="#{userModel.meOrFilled(userModel.selectedUser.visibleEmail)}"/>
            <h:panelGroup rendered="#{userModel.otherAndFilled(userModel.selectedUser.visibleEmail)}">
                <a href="mailto:#{userModel.selectedUser.visibleEmail}">
                    <h:outputText value="#{userModel.selectedUser.visibleEmail}"/>
                </a>
            </h:panelGroup>
            <h:panelGroup rendered="#{userModel.me}">
                <p:inputText value="#{userModel.selectedUser.email}" rendered="#{userModel.me}"/>
                <p:selectBooleanCheckbox value="#{userModel.selectedUser.emailVisible}" label="sichtbar"/>
            </h:panelGroup>

            <h:outputText value="facebook" rendered="#{userModel.meOrFilled(userModel.selectedUser.facebook)}"/>
            <h:panelGroup rendered="#{userModel.meOrFilled(userModel.selectedUser.facebook)}">
                <p:inputText value="#{userModel.selectedUser.facebook}" rendered="#{userModel.me}"/>

                <p>
                    <h:panelGroup rendered="#{not empty userModel.selectedUser.facebook}">
                        <a href="http://www.facebook.com/#{userModel.selectedUser.facebook}">#{userModel.selectedUser.facebook}</a>
                    </h:panelGroup>
                </p>
            </h:panelGroup>

            <h:outputText value="skype" rendered="#{userModel.meOrFilled(userModel.selectedUser.skype)}"/>
            <h:panelGroup rendered="#{userModel.meOrFilled(userModel.selectedUser.skype)}">

                <p:inputText value="#{userModel.selectedUser.skype}" rendered="#{userModel.me}"/>

                <p>
                    <h:panelGroup rendered="#{not empty userModel.selectedUser.skype}">
                        <!--
                        Skype 'Skype Me™!' button
                        http://www.skype.com/go/skypebuttons
                        -->
                        <script type="text/javascript"
                                src="http://download.skype.com/share/skypebuttons/js/skypeCheck.js"></script>
                        <a href="skype:#{userModel.selectedUser.skype}?call"><img
                                src="http://download.skype.com/share/skypebuttons/buttons/call_green_white_92x82.png"
                                style="border: none;" width="92" height="82" alt="Skype Me™!"/></a>
                    </h:panelGroup>
                </p>
            </h:panelGroup>

            <h:outputText value="Kontostand:"/>
            <h:outputText value="#{userModel.selectedUser.balance}"/>

            <h:outputText value="limit:"/>
            <h:outputText value="#{userModel.selectedUser.limit}"/>

            <h:outputText value="Ausstehende Gebühr:"/>
            <h:outputText value="#{userModel.selectedUser.missingFee} €"/>

            <h:outputText value="Gebühr:"/>
            <h:outputText value="#{userModel.selectedUser.fee} €"/>

            <h:outputText value="Adresse:" rendered="#{userModel.other and userModel.selectedUser.addressVisible}"/>
            <h:panelGroup rendered="#{userModel.other and userModel.selectedUser.addressVisible}">
                <p>
                    <h:outputText value="#{userModel.selectedUser.street}"/>
                    <h:outputText value="#{userModel.selectedUser.houseNumber}"/>
                </p>

                <p>
                    <h:outputText value="#{userModel.selectedUser.plz}"/>
                    <h:outputText value="#{userModel.selectedUser.city}"/>
                </p>
            </h:panelGroup>

            <h:outputText value="Adresse sichbar:" rendered="#{userModel.me}"/>
            <p:selectBooleanCheckbox value="#{userModel.selectedUser.addressVisible}" rendered="#{userModel.me}"/>

            <h:outputText value="Straße, Hausnummer:" rendered="#{userModel.me}"/>
            <h:panelGroup rendered="#{userModel.me}">
                <p:inputText value="#{userModel.selectedUser.street}"/>
                <p:inputText value="#{userModel.selectedUser.houseNumber}" size="4"/>
            </h:panelGroup>

            <h:outputText value="Plz, Stadt:" rendered="#{userModel.me}"/>
            <h:panelGroup rendered="#{userModel.me}">
                <p:inputText value="#{userModel.selectedUser.plz}" size="4"/>
                <p:inputText value="#{userModel.selectedUser.city}"/>
            </h:panelGroup>

            <h:outputText value="Stadtteil:" rendered="#{userModel.meOrFilled(userModel.selectedUser.district)}"/>
            <h:outputText value="#{userModel.selectedUser.district}"
                          rendered="#{userModel.otherAndFilled(userModel.selectedUser.district)}"/>
            <p:inputText value="#{userModel.selectedUser.district}" rendered="#{userModel.me}"/>

            <h:outputText value="Mobil:" rendered="#{userModel.meOrFilled(userModel.selectedUser.phoneMobile)}"/>
            <h:outputText value="#{userModel.selectedUser.phoneMobile}"
                          rendered="#{userModel.otherAndFilled(userModel.selectedUser.phoneMobile)}"/>
            <p:inputText value="#{userModel.selectedUser.phoneMobile}" rendered="#{userModel.me}"/>

            <h:outputText value="Telefon:" rendered="#{userModel.meOrFilled(userModel.selectedUser.phone)}"/>
            <h:outputText value="#{userModel.selectedUser.phone}"
                          rendered="#{userModel.otherAndFilled(userModel.selectedUser.phone)}"/>
            <p:inputText value="#{userModel.selectedUser.phone}" rendered="#{userModel.me}"/>

            <h:outputText value="Homepage:" rendered="#{userModel.meOrFilled(userModel.selectedUser.url)}"/>
            <h:panelGroup rendered="#{userModel.otherAndFilled(userModel.selectedUser.url)}">
                <a href="#{userModel.selectedUser.url}">
                    <h:outputText value="#{userModel.selectedUser.url}"/>
                </a>

                <p>
                    <h:outputText value="#{userModel.selectedUser.urlDescription}"/>
                </p>
            </h:panelGroup>
            <p:inputText value="#{userModel.selectedUser.url}" rendered="#{userModel.me}"/>

            <h:outputText value="Homepage Beschreibung:" rendered="#{userModel.me}"/>
            <p:inputText value="#{userModel.selectedUser.urlDescription}" rendered="#{userModel.me}"/>

            <h:outputText value="Geburtstag:" rendered="#{userModel.meOrFilled(userModel.selectedUser.birthDay)}"/>
            <h:outputText value="#{userModel.selectedUser.formattedBirthDay}"
                          rendered="#{userModel.otherAndFilled(userModel.selectedUser.birthDay)}"/>
            <p:calendar locale="de" navigator="true" value="#{userModel.selectedUser.birthDay}" rendered=
                    "#{userModel.me}"/>

            <h:outputText value="Profil:" rendered="#{userModel.meOrFilled(userModel.selectedUser.profile)}"/>
            <h:outputText value="#{userModel.selectedUser.profile}"
                          rendered="#{userModel.otherAndFilled(userModel.selectedUser.profile)}"/>
            <p:inputText value="#{userModel.selectedUser.profile}" rendered="#{userModel.me}"/>

            <h:outputText value="Erreichbarkeit:"
                          rendered="#{userModel.meOrFilled(userModel.selectedUser.accessibility)}"/>
            <h:outputText value="#{userModel.selectedUser.accessibility}"
                          rendered="#{userModel.otherAndFilled(userModel.selectedUser.accessibility)}"/>
            <p:inputText value="#{userModel.selectedUser.accessibility}" rendered="#{userModel.me}"/>

            <h:outputText value="Status:"/>
            <h:outputText value="#{userModel.selectedUser.status.translation}"/>

            <h:outputText value="Aktivierungsdatum:"/>
            <h:outputText value="#{userModel.selectedUser.formattedActivated}"/>

            <h:outputText value="Deaktivierungsdatum:"
                          rendered="#{not empty userModel.selectedUser.formattedDeActivated}"/>
            <h:outputText value="#{userModel.selectedUser.formattedDeActivated}"
                          rendered="#{not empty userModel.selectedUser.formattedDeActivated}"/>


            <p:commandButton value="Speichern" ajax="false" actionListener="#{userSession.updateUser}"
                             rendered="#{userModel.me}"/>
        </h:panelGrid>
    </h:form>
</p:panel>

<p:panel header="Anzeigen" rendered="#{userModel.other and not empty userModel.selectedUser.advertisements}">
    <p:dataTable id="advertisementTable" var="advertisement" value="#{userModel.selectedUser.advertisements}"
                 styleClass="ui-corner-all">
        <p:column id="title" sortBy="#{advertisement.title}">
            <f:facet name="header">
                <h:outputText value="Titel"/>
            </f:facet>
            <a href="${pageContext.request.servletPath}#{advertisement.browseUrl}">
                #{advertisement.title}
            </a>
        </p:column>
        <p:column id="type" sortBy="#{advertisement.title}">
            <f:facet name="header">
                <h:outputText value="Typ"/>
            </f:facet>
            <a href="${pageContext.request.servletPath}#{advertisement.browseTypeUrl}">
                #{advertisement.type.translation}
            </a>
        </p:column>

        <p:column id="category" sortBy="#{advertisement.category}">
            <f:facet name="header">
                <h:outputText value="Category"/>
            </f:facet>
            <a href="${pageContext.request.servletPath}#{advertisement.browseCategoryUrl}">
                #{advertisement.category.desc}
            </a>
        </p:column>
    </p:dataTable>
</p:panel>

</ui:define>
</ui:composition>