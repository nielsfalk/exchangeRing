<!--
================GNU General Public License================================

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.  If not, see <http://www.gnu.org/licenses/>.

================in addition===============================================

In addition, each military use, and the use for interest profit will be
excluded.
Environmental damage caused by the use must be kept as small as possible.

-->
<ui:composition template="/decorators/menuDecorator.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://java.sun.com/jsf/core">
    <ui:define name="contentWithMenu">
        <f:metadata>
            <f:viewParam name="userId" value="#{user.selectedUserId}"/>
            <f:viewParam name="me" value="#{user.selectedMe}"/>
        </f:metadata>
        <p:panel header="#{user.selectedUser.displayName}">
            <h:form>
                <h:panelGrid columns="2" columnClasses="column" cellpadding="5">
                    <h:outputText value="Avatar:"/>
                    <h:panelGroup>
                        <img src="#{user.selectedUser.gravatarUrl250}" alt="avatar"/>
                        <ui:fragment rendered="#{user.me}">
                            <p>Der Avatar lässt sich auf <a href="http://de.gravatar.com/">gravatar.com</a> ändern.</p>
                        </ui:fragment>
                    </h:panelGroup>

                    <h:outputText value="ID:"/>
                    <h:outputText value="#{user.selectedUser.id}"/>

                    <h:outputText value="Nickname:" rendered="#{user.meOrFilled(user.selectedUser.nickName)}"/>
                    <h:outputText value="#{user.selectedUser.nickName}"
                                  rendered="#{user.otherAndFilled(user.selectedUser.nickName)}"/>
                    <p:inputText value="#{user.selectedUser.nickName}" rendered="#{user.me}"/>

                    <h:outputText value="#{user.me?'Vorname, sichtbar':'Vorname'}:"
                                  rendered="#{user.meOrFilled(user.selectedUser.visibleFirstName)}"/>
                    <h:panelGroup rendered="#{user.meOrFilled(user.selectedUser.visibleFirstName)}">
                        <h:outputText value="#{user.selectedUser.visibleFirstName}"/>
                        <p:selectBooleanCheckbox value="#{user.selectedUser.firstNameVisible}" rendered="#{user.me}"/>
                    </h:panelGroup>

                    <h:outputText value="#{user.me?'Nachname, sichtbar':'Nachname'}:"
                                  rendered="#{user.meOrFilled(user.selectedUser.visibleLastName)}"/>
                    <h:panelGroup rendered="#{user.meOrFilled(user.selectedUser.visibleLastName)}">
                        <h:outputText value="#{user.selectedUser.visibleLastName}"/>
                        <p:selectBooleanCheckbox value="#{user.selectedUser.lastNameVisible}" rendered="#{user.me}"/>
                    </h:panelGroup>

                    <h:outputText value="Überweisung:" rendered="#{user.other}"/>
                    <h:panelGroup rendered="#{user.other}">
                        <a href="${pageContext.request.servletPath}/internal/transaction.xhtml?receiverId=#{user.selectedUser.id}">
                            überweisung an #{user.selectedUser.id}
                        </a>
                    </h:panelGroup>

                    <h:outputText value="#{user.me?'Email, sichtbar':'Email'}:"
                                  rendered="#{user.meOrFilled(user.selectedUser.visibleEmail)}"/>
                    <h:panelGroup rendered="#{user.otherAndFilled(user.selectedUser.visibleEmail)}">
                        <a href="mailto:#{user.selectedUser.visibleEmail}">
                            <h:outputText value="#{user.selectedUser.visibleEmail}"/>
                        </a>
                    </h:panelGroup>
                    <h:panelGroup rendered="#{user.me}">
                        <p:inputText value="#{user.selectedUser.email}" rendered="#{user.me}"/>
                        <p:selectBooleanCheckbox value="#{user.selectedUser.emailVisible}" label="sichtbar"/>
                    </h:panelGroup>

                    <h:outputText value="facebook" rendered="#{user.meOrFilled(user.selectedUser.facebook)}"/>
                    <h:panelGroup rendered="#{user.meOrFilled(user.selectedUser.facebook)}">
                        <p:inputText value="#{user.selectedUser.facebook}" rendered="#{user.me}"/>

                        <p>
                            <h:panelGroup rendered="#{not empty user.selectedUser.facebook}">
                                <a href="http://www.facebook.com/#{user.selectedUser.facebook}">#{user.selectedUser.facebook}</a>
                            </h:panelGroup>
                        </p>
                    </h:panelGroup>

                    <h:outputText value="skype" rendered="#{user.meOrFilled(user.selectedUser.skype)}"/>
                    <h:panelGroup rendered="#{user.meOrFilled(user.selectedUser.skype)}">

                        <p:inputText value="#{user.selectedUser.skype}" rendered="#{user.me}"/>

                        <p>
                            <h:panelGroup rendered="#{not empty user.selectedUser.skype}">
                                <!--
                                Skype 'Skype Me™!' button
                                http://www.skype.com/go/skypebuttons
                                -->
                                <script type="text/javascript"
                                        src="http://download.skype.com/share/skypebuttons/js/skypeCheck.js"></script>
                                <a href="skype:#{user.selectedUser.skype}?call"><img
                                        src="http://download.skype.com/share/skypebuttons/buttons/call_green_white_92x82.png"
                                        style="border: none;" width="92" height="82" alt="Skype Me™!"/></a>
                            </h:panelGroup>
                        </p>
                    </h:panelGroup>

                    <h:outputText value="Kontostand:"/>
                    <h:outputText value="#{user.selectedUser.balance}"/>

                    <h:outputText value="limit:"/>
                    <h:outputText value="#{user.selectedUser.limit}"/>

                    <h:outputText value="Ausstehende Gebühr:"/>
                    <h:outputText value="#{user.selectedUser.missingFee} €"/>

                    <h:outputText value="Gebühr:"/>
                    <h:outputText value="#{user.selectedUser.fee} €"/>

                    <h:outputText value="Adresse:" rendered="#{user.other and user.selectedUser.addressVisible}"/>
                    <h:panelGroup rendered="#{user.other and user.selectedUser.addressVisible}">
                        <p>
                            <h:outputText value="#{user.selectedUser.street}"/>
                            <h:outputText value="#{user.selectedUser.houseNumber}"/>
                        </p>

                        <p>
                            <h:outputText value="#{user.selectedUser.plz}"/>
                            <h:outputText value="#{user.selectedUser.city}"/>
                        </p>
                    </h:panelGroup>

                    <h:outputText value="Adresse sichbar:" rendered="#{user.me}"/>
                    <p:selectBooleanCheckbox value="#{user.selectedUser.addressVisible}" rendered="#{user.me}"/>

                    <h:outputText value="Straße, Hausnummer:" rendered="#{user.me}"/>
                    <h:panelGroup rendered="#{user.me}">
                        <p:inputText value="#{user.selectedUser.street}"/>
                        <p:inputText value="#{user.selectedUser.houseNumber}" size="4"/>
                    </h:panelGroup>

                    <h:outputText value="Plz, Stadt:" rendered="#{user.me}"/>
                    <h:panelGroup rendered="#{user.me}">
                        <p:inputText value="#{user.selectedUser.plz}" size="4"/>
                        <p:inputText value="#{user.selectedUser.city}"/>
                    </h:panelGroup>

                    <h:outputText value="Stadtteil:" rendered="#{user.meOrFilled(user.selectedUser.district)}"/>
                    <h:outputText value="#{user.selectedUser.district}"
                                  rendered="#{user.otherAndFilled(user.selectedUser.district)}"/>
                    <p:inputText value="#{user.selectedUser.district}" rendered="#{user.me}"/>

                    <h:outputText value="Mobil:" rendered="#{user.meOrFilled(user.selectedUser.phoneMobile)}"/>
                    <h:outputText value="#{user.selectedUser.phoneMobile}"
                                  rendered="#{user.otherAndFilled(user.selectedUser.phoneMobile)}"/>
                    <p:inputText value="#{user.selectedUser.phoneMobile}" rendered="#{user.me}"/>

                    <h:outputText value="Telefon:" rendered="#{user.meOrFilled(user.selectedUser.phone)}"/>
                    <h:outputText value="#{user.selectedUser.phone}"
                                  rendered="#{user.otherAndFilled(user.selectedUser.phone)}"/>
                    <p:inputText value="#{user.selectedUser.phone}" rendered="#{user.me}"/>

                    <h:outputText value="Homepage:" rendered="#{user.meOrFilled(user.selectedUser.url)}"/>
                    <h:panelGroup rendered="#{user.otherAndFilled(user.selectedUser.url)}">
                        <a href="#{user.selectedUser.url}">
                            <h:outputText value="#{user.selectedUser.url}"/>
                        </a>

                        <p>
                            <h:outputText value="#{user.selectedUser.urlDescription}"/>
                        </p>
                    </h:panelGroup>
                    <p:inputText value="#{user.selectedUser.url}" rendered="#{user.me}"/>

                    <h:outputText value="Homepage Beschreibung:" rendered="#{user.me}"/>
                    <p:inputText value="#{user.selectedUser.urlDescription}" rendered="#{user.me}"/>

                    <h:outputText value="Geburtstag:" rendered="#{user.meOrFilled(user.selectedUser.birthDay)}"/>
                    <h:outputText value="#{user.selectedUser.formattedBirthDay}"
                                  rendered="#{user.otherAndFilled(user.selectedUser.birthDay)}"/>
                    <p:calendar locale="de" navigator="true" value="#{user.selectedUser.birthDay}" rendered=
                            "#{user.me}"/>

                    <h:outputText value="Profil:" rendered="#{user.meOrFilled(user.selectedUser.wordsOfWisdom)}"/>
                    <h:outputText value="#{user.selectedUser.wordsOfWisdom}"
                                  rendered="#{user.otherAndFilled(user.selectedUser.wordsOfWisdom)}"/>
                    <p:inputText value="#{user.selectedUser.wordsOfWisdom}" rendered="#{user.me}"/>

                    <h:outputText value="Erreichbarkeit:"
                                  rendered="#{user.meOrFilled(user.selectedUser.accessibility)}"/>
                    <h:outputText value="#{user.selectedUser.accessibility}"
                                  rendered="#{user.otherAndFilled(user.selectedUser.accessibility)}"/>
                    <p:inputText value="#{user.selectedUser.accessibility}" rendered="#{user.me}"/>

                    <h:outputText value="Status:"/>
                    <h:outputText value="#{user.selectedUser.status.translation}"/>

                    <h:outputText value="Aktivierungsdatum:"/>
                    <h:outputText value="#{user.selectedUser.formattedActivated}"/>

                    <h:outputText value="Deaktivierungsdatum:"
                                  rendered="#{not empty user.selectedUser.formattedDeActivated}"/>
                    <h:outputText value="#{user.selectedUser.formattedDeActivated}"
                                  rendered="#{not empty user.selectedUser.formattedDeActivated}"/>


                    <p:commandButton value="Speichern" ajax="false" actionListener="#{userSession.updateUser}"
                                     rendered="#{user.me}"/>
                </h:panelGrid>
            </h:form>
        </p:panel>

    </ui:define>
</ui:composition>