<!--
================GNU General Public License================================

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.  If not, see <http://www.gnu.org/licenses/>.

================in addition===============================================

In addition, each military use, and the use for interest profit will be
excluded.
Environmental damage caused by the use must be kept as small as possible.

-->
<ui:composition template="/decorators/menuDecorator.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://java.sun.com/jsf/core">
<ui:define name="contentWithMenu">
<f:metadata>
    <f:viewParam name="userId" value="#{users.selectedUserId}"/>
    <f:viewParam name="me" value="#{users.selectedMe}"/>
</f:metadata>
<p:panel header="#{users.selectedUser.displayName}">
    <h:form>
        <h:panelGrid columns="2" columnClasses="column" cellpadding="5">
            <h:outputText value="Avatar:"/>
            <h:panelGroup>
                <img src="#{users.selectedUser.gravatarUrl250}" alt="avatar"/>
                <ui:fragment rendered="#{users.me}">
                    <p>Der Avatar lässt sich auf <a href="http://de.gravatar.com/">gravatar.com</a> ändern.</p>

                    <p>Möchtest du kein Foto benutzen? <a href="http://www.faceyourmanga.com/">faceyourmanga</a></p>
                </ui:fragment>
            </h:panelGroup>

            <h:outputText value="ID:"/>
            <h:outputText value="#{users.selectedUser.id}"/>

            <h:outputText value="Nickname:" rendered="#{users.meOrFilled(users.selectedUser.nickName)}"/>
            <h:outputText value="#{users.selectedUser.nickName}"
                          rendered="#{users.otherAndFilled(users.selectedUser.nickName)}"/>
            <p:inputText value="#{users.selectedUser.nickName}" rendered="#{users.me}"/>

            <h:outputText value="#{users.me?'Vorname, sichtbar':'Vorname'}:"
                          rendered="#{users.meOrFilled(users.selectedUser.visibleFirstName)}"/>
            <h:panelGroup rendered="#{users.meOrFilled(users.selectedUser.visibleFirstName)}">
                <h:outputText value="#{users.selectedUser.visibleFirstName}"/>
                <p:selectBooleanCheckbox value="#{users.selectedUser.firstNameVisible}" rendered="#{users.me}"/>
            </h:panelGroup>

            <h:outputText value="#{users.me?'Nachname, sichtbar':'Nachname'}:"
                          rendered="#{users.meOrFilled(users.selectedUser.visibleLastName)}"/>
            <h:panelGroup rendered="#{users.meOrFilled(users.selectedUser.visibleLastName)}">
                <h:outputText value="#{users.selectedUser.visibleLastName}"/>
                <p:selectBooleanCheckbox value="#{users.selectedUser.lastNameVisible}" rendered="#{users.me}"/>
            </h:panelGroup>

            <h:outputText value="Überweisung:" rendered="#{users.other}"/>
            <h:panelGroup rendered="#{users.other}">
                <a href="${pageContext.request.servletPath}/internal/transaction.xhtml?receiverId=#{users.selectedUser.id}">
                    überweisung an #{users.selectedUser.id}
                </a>
            </h:panelGroup>

            <h:outputText value="#{users.me?'Email, sichtbar':'Email'}:"
                          rendered="#{users.meOrFilled(users.selectedUser.visibleEmail)}"/>
            <h:panelGroup rendered="#{users.otherAndFilled(users.selectedUser.visibleEmail)}">
                <a href="mailto:#{users.selectedUser.visibleEmail}">
                    <h:outputText value="#{users.selectedUser.visibleEmail}"/>
                </a>
            </h:panelGroup>
            <h:panelGroup rendered="#{users.me}">
                <p:inputText value="#{users.selectedUser.email}" rendered="#{users.me}"/>
                <p:selectBooleanCheckbox value="#{users.selectedUser.emailVisible}" label="sichtbar"/>
            </h:panelGroup>

            <h:outputText value="facebook" rendered="#{users.meOrFilled(users.selectedUser.facebook)}"/>
            <h:panelGroup rendered="#{users.meOrFilled(users.selectedUser.facebook)}">
                <p:inputText value="#{users.selectedUser.facebook}" rendered="#{users.me}"/>

                <p>
                    <h:panelGroup rendered="#{not empty users.selectedUser.facebook}">
                        <a href="http://www.facebook.com/#{users.selectedUser.facebook}">#{users.selectedUser.facebook}</a>
                    </h:panelGroup>
                </p>
            </h:panelGroup>

            <h:outputText value="skype" rendered="#{users.meOrFilled(users.selectedUser.skype)}"/>
            <h:panelGroup rendered="#{users.meOrFilled(users.selectedUser.skype)}">

                <p:inputText value="#{users.selectedUser.skype}" rendered="#{users.me}"/>

                <p>
                    <h:panelGroup rendered="#{not empty users.selectedUser.skype}">
                        <!--
                        Skype 'Skype Me™!' button
                        http://www.skype.com/go/skypebuttons
                        -->
                        <script type="text/javascript"
                                src="http://download.skype.com/share/skypebuttons/js/skypeCheck.js"></script>
                        <a href="skype:#{users.selectedUser.skype}?call"><img
                                src="http://download.skype.com/share/skypebuttons/buttons/call_green_white_92x82.png"
                                style="border: none;" width="92" height="82" alt="Skype Me™!"/></a>
                    </h:panelGroup>
                </p>
            </h:panelGroup>

            <h:outputText value="Kontostand:"/>
            <h:outputText value="#{users.selectedUser.balance}"/>

            <h:outputText value="limit:"/>
            <h:outputText value="#{users.selectedUser.limit}"/>

            <h:outputText value="Ausstehende Gebühr:"/>
            <h:outputText value="#{users.selectedUser.missingFee} €"/>

            <h:outputText value="Gebühr:"/>
            <h:outputText value="#{users.selectedUser.fee} €"/>

            <h:outputText value="Adresse:" rendered="#{users.other and users.selectedUser.addressVisible}"/>
            <h:panelGroup rendered="#{users.other and users.selectedUser.addressVisible}">
                <p>
                    <h:outputText value="#{users.selectedUser.street}"/>
                    <h:outputText value="#{users.selectedUser.houseNumber}"/>
                </p>

                <p>
                    <h:outputText value="#{users.selectedUser.plz}"/>
                    <h:outputText value="#{users.selectedUser.city}"/>
                </p>
            </h:panelGroup>

            <h:outputText value="Adresse sichbar:" rendered="#{users.me}"/>
            <p:selectBooleanCheckbox value="#{users.selectedUser.addressVisible}" rendered="#{users.me}"/>

            <h:outputText value="Straße, Hausnummer:" rendered="#{users.me}"/>
            <h:panelGroup rendered="#{users.me}">
                <p:inputText value="#{users.selectedUser.street}"/>
                <p:inputText value="#{users.selectedUser.houseNumber}" size="4"/>
            </h:panelGroup>

            <h:outputText value="Plz, Stadt:" rendered="#{users.me}"/>
            <h:panelGroup rendered="#{users.me}">
                <p:inputText value="#{users.selectedUser.plz}" size="4"/>
                <p:inputText value="#{users.selectedUser.city}"/>
            </h:panelGroup>

            <h:outputText value="Stadtteil:" rendered="#{users.meOrFilled(users.selectedUser.district)}"/>
            <h:outputText value="#{users.selectedUser.district}"
                          rendered="#{users.otherAndFilled(users.selectedUser.district)}"/>
            <p:inputText value="#{users.selectedUser.district}" rendered="#{users.me}"/>

            <h:outputText value="Mobil:" rendered="#{users.meOrFilled(users.selectedUser.phoneMobile)}"/>
            <h:outputText value="#{users.selectedUser.phoneMobile}"
                          rendered="#{users.otherAndFilled(users.selectedUser.phoneMobile)}"/>
            <p:inputText value="#{users.selectedUser.phoneMobile}" rendered="#{users.me}"/>

            <h:outputText value="Telefon:" rendered="#{users.meOrFilled(users.selectedUser.phone)}"/>
            <h:outputText value="#{users.selectedUser.phone}"
                          rendered="#{users.otherAndFilled(users.selectedUser.phone)}"/>
            <p:inputText value="#{users.selectedUser.phone}" rendered="#{users.me}"/>

            <h:outputText value="Homepage:" rendered="#{users.meOrFilled(users.selectedUser.url)}"/>
            <h:panelGroup rendered="#{users.otherAndFilled(users.selectedUser.url)}">
                <a href="#{users.selectedUser.url}">
                    <h:outputText value="#{users.selectedUser.url}"/>
                </a>

                <p>
                    <h:outputText value="#{users.selectedUser.urlDescription}"/>
                </p>
            </h:panelGroup>
            <p:inputText value="#{users.selectedUser.url}" rendered="#{users.me}"/>

            <h:outputText value="Homepage Beschreibung:" rendered="#{users.me}"/>
            <p:inputText value="#{users.selectedUser.urlDescription}" rendered="#{users.me}"/>

            <h:outputText value="Geburtstag:" rendered="#{users.meOrFilled(users.selectedUser.birthDay)}"/>
            <h:outputText value="#{users.selectedUser.formattedBirthDay}"
                          rendered="#{users.otherAndFilled(users.selectedUser.birthDay)}"/>
            <p:calendar locale="de" navigator="true" value="#{users.selectedUser.birthDay}" rendered=
                    "#{users.me}"/>

            <h:outputText value="Profil:" rendered="#{users.meOrFilled(users.selectedUser.profile)}"/>
            <h:outputText value="#{users.selectedUser.profile}"
                          rendered="#{users.otherAndFilled(users.selectedUser.profile)}"/>
            <p:inputText value="#{users.selectedUser.profile}" rendered="#{users.me}"/>

            <h:outputText value="Erreichbarkeit:"
                          rendered="#{users.meOrFilled(users.selectedUser.accessibility)}"/>
            <h:outputText value="#{users.selectedUser.accessibility}"
                          rendered="#{users.otherAndFilled(users.selectedUser.accessibility)}"/>
            <p:inputText value="#{users.selectedUser.accessibility}" rendered="#{users.me}"/>

            <h:outputText value="Status:"/>
            <h:outputText value="#{users.selectedUser.status.translation}"/>

            <h:outputText value="Aktivierungsdatum:"/>
            <h:outputText value="#{users.selectedUser.formattedActivated}"/>

            <h:outputText value="Deaktivierungsdatum:"
                          rendered="#{not empty users.selectedUser.formattedDeActivated}"/>
            <h:outputText value="#{users.selectedUser.formattedDeActivated}"
                          rendered="#{not empty users.selectedUser.formattedDeActivated}"/>


            <p:commandButton value="Speichern" ajax="false" actionListener="#{userSession.updateUser}"
                             rendered="#{users.me}"/>
        </h:panelGrid>
    </h:form>
</p:panel>

<p/>
<p:panel header="Anzeigen" rendered="#{not empty users.selectedUser.advertisements}">
    <p:dataTable id="advertisementTable" var="advertisement" value="#{users.selectedUser.advertisements}"
                 styleClass="ui-corner-all">
        <p:column id="memberId" sortBy="#{advertisement.title}">
            <f:facet name="header">
                <h:outputText value="Titel"/>
            </f:facet>
            <a href="${pageContext.request.servletPath}#{advertisement.link}/internal/members/user.xhtml?userId=#{member.id}">
                <img src="#{member.gravatarHeaderUrl49}" alt="avatar #{member.displayName}"/>
                <h:outputText value="#{member.id}"/>
            </a>
        </p:column>
    </p:dataTable>
</p:panel>
</ui:define>
</ui:composition>